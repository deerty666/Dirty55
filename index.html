<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù‚Ø§Ø¦Ù…Ø© Ù…Ø·Ø§Ø¹Ù… Ø³Ø­Ø§ÙŠØ¨ Ø¯ÙŠØ±ØªÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --gold:#d3a15e;
    --brown:#2b1a10;
  }
  body{font-family:'Cairo',sans-serif;margin:0;background:#f5f5f5;color:var(--brown);}
  header{background:#fff;padding:16px;text-align:center;}
  header img{height:50px;}
  #sections{display:flex;gap:8px;overflow-x:auto;padding:12px;background:#fff;border-bottom:1px solid rgba(0,0,0,0.05);}
  .sec-btn{background:var(--gold);color:var(--brown);padding:8px 14px;border-radius:999px;font-weight:700;border:none;cursor:pointer;white-space:nowrap;}
  #menuList{padding:14px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;}
  .card{background:rgba(255,255,255,0.95);backdrop-filter:blur(4px);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);padding:12px;display:flex;justify-content:space-between;align-items:center;gap:12px;transition:transform .15s;}
  .card:hover{transform:translateY(-4px);}
  .card .left{display:flex;gap:12px;align-items:center;}
  .card img{width:84px;height:84px;border-radius:10px;object-fit:cover;}
  .card h3{margin:0;font-size:1rem;color:var(--brown);font-weight:700;}
  .card p{margin:2px 0 0;color:rgba(0,0,0,0.55);font-size:0.9rem;}
  .card .right{text-align:right;display:flex;flex-direction:column;gap:8px;align-items:flex-end;}
  .price{font-size:1.2rem;font-weight:800;color:var(--brown);}
  .add-btn{background:var(--gold);color:var(--brown);border:none;padding:8px 12px;border-radius:8px;font-weight:800;cursor:pointer;}
  /* cart drawer */
  #cartDrawer{position:fixed;right:0;top:0;height:100%;width:360px;background:#fff;box-shadow:-8px 0 24px rgba(0,0,0,0.15);transform:translateX(110%);transition:transform .25s;z-index:80;display:flex;flex-direction:column;}
  #cartDrawer.open{transform:translateX(0);}
  #cartOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;z-index:70;}
  #cartOverlay.show{display:block;}
  .cart-header{padding:14px;border-bottom:1px solid rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:center;font-weight:800;}
  #cartItems{padding:12px;overflow:auto;flex:1;}
  .cart-row{display:flex;justify-content:space-between;align-items:center;padding:8px;background:rgba(245,245,245,0.9);border-radius:8px;margin-bottom:8px;}
  .cart-row .controls{display:flex;gap:6px;align-items:center;}
  .cart-footer{padding:12px;border-top:1px solid rgba(0,0,0,0.06);display:flex;flex-direction:column;gap:8px;}
  .primary-btn{background:var(--gold);color:var(--brown);border:none;padding:10px;border-radius:8px;font-weight:800;cursor:pointer;}
  .danger-btn{background:#ef4444;color:#fff;border:none;padding:8px;border-radius:8px;cursor:pointer;}
  /* footer cart */
  #cartBtn{position:fixed;bottom:18px;right:18px;background:var(--gold);color:var(--brown);padding:14px;border-radius:999px;border:none;font-weight:800;z-index:90;box-shadow:0 6px 18px rgba(0,0,0,0.12);cursor:pointer;}
  #cartCount{background:#ef4444;color:#fff;padding:2px 8px;border-radius:999px;margin-left:8px;font-weight:800;display:inline-block;}
  /* modal select rice */
  #riceModal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;justify-content:center;align-items:center;z-index:100;}
  #riceModal .modal-content{background:#fff;padding:16px;border-radius:12px;max-width:320px;width:100%;text-align:right;}
  #riceModal h4{margin-top:0;margin-bottom:12px;font-weight:700;}
  #riceModal button{margin-top:12px;width:100%;padding:10px;background:var(--gold);color:var(--brown);border:none;border-radius:8px;font-weight:700;cursor:pointer;}
  @media (max-width:640px){#cartDrawer{width:100%;}.card img{width:72px;height:72px;}}
</style>
</head>
<body>

<header>
  <img src="logo-bg.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…">
</header>

<div id="sections"></div>
<main id="menuList"></main>

<!-- Cart drawer -->
<div id="cartOverlay"></div>
<div id="cartDrawer" aria-hidden="true">
  <div class="cart-header">
    <div>Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
    <button id="closeCartBtn" title="Ø¥ØºÙ„Ø§Ù‚">âœ–</button>
  </div>
  <div style="padding:12px;border-bottom:1px solid rgba(0,0,0,0.04);display:flex;gap:8px;justify-content:space-between;">
    <label><input type="radio" name="deliveryType" value="pickup" checked> Ø§Ø³ØªÙ„Ø§Ù…</label>
    <label><input type="radio" name="deliveryType" value="delivery"> ØªÙˆØµÙŠÙ„ â€” 5 Ø±ÙŠØ§Ù„</label>
  </div>
  <div id="cartItems"></div>
  <div class="cart-footer">
    <div style="display:flex;justify-content:space-between;align-items:center;font-weight:800;">
      <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div><div id="cartTotalBottom">0 Ø±ÙŠØ§Ù„</div>
    </div>
    <div style="display:flex;gap:8px;">
      <button id="sendWhatsapp" class="primary-btn" style="flex:1;">Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
      <button id="clearCart" class="danger-btn" style="width:120px;">Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©</button>
    </div>
  </div>
</div>

<button id="cartBtn" aria-label="Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©">ğŸ›’ <span id="cartCount" style="display:none"></span></button>

<!-- Toast -->
<div id="toast" style="position:fixed;bottom:90px;right:20px;background:#111;color:#fff;padding:10px;border-radius:8px;display:none;z-index:100;"></div>

<!-- Modal rice selection -->
<div id="riceModal">
  <div class="modal-content">
    <h4>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø±Ø²</h4>
    <div id="riceOptions"></div>
    <button id="riceConfirm">ØªØ£ÙƒÙŠØ¯</button>
  </div>
</div>

<script>
const menuData = [
  { section: "Ø§Ù„Ø´ÙˆØ§ÙŠÙ‡", items:[
    {id:"sh1", img:"sh.jpg", name:"Ø­Ø¨Ø© Ø´ÙˆØ§ÙŠÙ‡", price:46, rice:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ", add:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±", add:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ", add:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡", add:4}]},
    {id:"sh2", img:"sh.jpg", name:"Ù†Øµ Ø­Ø¨Ù‡ Ø´ÙˆØ§ÙŠÙ‡", price:24, rice:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ", add:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±", add:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ", add:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡", add:1}]}
  ]},
  { section: "Ø§Ù„Ù…Ø¸Ø¨ÙŠ", items:[
    {id:"md1", img:"md.jpg", name:"Ø­Ø¨Ù‡ Ù…Ø¸Ø¨ÙŠ", price:46, rice:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ", add:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±", add:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ", add:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡", add:4}]},
    {id:"md2", img:"md.jpg", name:"Ù†Øµ Ø­Ø¨Ù‡ Ù…Ø¸Ø¨ÙŠ", price:24, rice:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ", add:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±", add:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ", add:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡", add:1}]}
  ]},
  { section: "Ø§Ù„Ù…Ù†Ø¯ÙŠ", items:[
    {id:"mn1", img:"mn.jpg", name:"Ø­Ø¨Ù‡ Ù…Ù†Ø¯ÙŠ", price:46, rice:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ", add:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±", add:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ", add:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡", add:4}]},
    {id:"mn2", img:"mn.jpg", name:"Ù†Øµ Ø­Ø¨Ù‡ Ù…Ù†Ø¯ÙŠ", price:24, rice:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ", add:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±", add:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ", add:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡", add:1}]}
  ]}
];

/* ====== Cart ====== */
let cart = JSON.parse(localStorage.getItem('deerty_cart')||'[]');

const sectionsEl=document.getElementById('sections');
const menuList=document.getElementById('menuList');
const cartBtn=document.getElementById('cartBtn');
const cartCount=document.getElementById('cartCount');
const cartDrawer=document.getElementById('cartDrawer');
const cartOverlay=document.getElementById('cartOverlay');
const closeCartBtn=document.getElementById('closeCartBtn');
const cartItemsEl=document.getElementById('cartItems');
const cartTotalBottom=document.getElementById('cartTotalBottom');
const sendWhatsapp=document.getElementById('sendWhatsapp');
const clearCart=document.getElementById('clearCart');
const toast=document.getElementById('toast');

/* Modal */
const riceModal=document.getElementById('riceModal');
const riceOptions=document.getElementById('riceOptions');
const riceConfirm=document.getElementById('riceConfirm');
let currentItem=null;

/* Render sections */
function renderSections(){
  sectionsEl.innerHTML='';
  menuData.forEach((sec,idx)=>{
    const btn=document.createElement('button');
    btn.className='sec-btn';
    btn.innerText=sec.section;
    btn.onclick=()=>renderMenu(sec.section);
    sectionsEl.appendChild(btn);
    if(idx===0) btn.click();
  });
}

/* Render menu */
function renderMenu(sectionName){
  menuList.innerHTML='';
  const sec=menuData.find(s=>s.section===sectionName);
  if(!sec) return;
  sec.items.forEach(item=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <div class="left">
        <img src="${item.img}" alt="${item.name}" onerror="this.style.opacity=.35">
        <div>
          <h3>${item.name}</h3>
          <p>${sectionName}</p>
        </div>
      </div>
      <div class="right">
        <div class="price">${item.price} Ø±ÙŠØ§Ù„</div>
        <button class="add-btn" onclick='selectRice(${JSON.stringify(item).replace(/'/g,"\\'")})'>Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
      </div>
    `;
    menuList.appendChild(card);
  });
}

/* ====== Rice modal ====== */
function selectRice(item){
  currentItem=item;
  riceOptions.innerHTML='';
  item.rice.forEach((r,idx)=>{
    const div=document.createElement('div');
    div.innerHTML=`<label><input type="radio" name="rice" value="${idx}" ${idx===0?'checked':''}> ${r.name} ${r.add>0?'+ '+r.add+' Ø±ÙŠØ§Ù„':''}</label>`;
    riceOptions.appendChild(div);
  });
  riceModal.style.display='flex';
}

riceConfirm.addEventListener('click', ()=>{
  const selectedIdx=parseInt(document.querySelector('input[name="rice"]:checked').value);
  const riceChoice=currentItem.rice[selectedIdx];
  const cartItem={...currentItem,name:currentItem.name+' ('+riceChoice.name+')',price:currentItem.price+riceChoice.add,qty:1};
  addToCart(cartItem);
  riceModal.style.display='none';
});

/* ====== Ø¨Ø§Ù‚ÙŠ Cart functions Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ ====== */

renderSections();
</script>
</body>
</html>
