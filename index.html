<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù†ÙŠÙˆ Ø¯ÙŠØ±ØªÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Cairo',sans-serif;background:#fff;color:#333}
header{display:flex;align-items:center;justify-content:center;padding:10px;background:#fffbf0}
header img{height:50px}
.sections{display:flex;overflow-x:auto;padding:10px;background:#fff;gap:6px}
.sec-btn{flex:none;padding:8px 16px;background:#ef4444;color:#fff;border:none;border-radius:10px;cursor:pointer}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;padding:10px}
.card{border:1px solid #ddd;padding:5px;border-radius:8px;display:flex;flex-direction:column;gap:5px}
.card img{width:100%;border-radius:5px;height:100px;object-fit:cover}
.add-btn{background:#ef4444;color:#fff;border:none;padding:5px;border-radius:6px;cursor:pointer;width:100%}
#cartBtn{position:fixed;bottom:20px;left:20px;background:#ef4444;color:#fff;border:none;padding:12px;border-radius:50%;cursor:pointer;z-index:500}
#cartCount{position:absolute;top:-5px;right:-5px;background:#fff;color:#ef4444;width:20px;height:20px;border-radius:50%;display:none;justify-content:center;align-items:center;font-size:12px;font-weight:bold}
#cartDrawer{position:fixed;top:0;right:-350px;width:300px;height:100%;background:#fff;box-shadow:-3px 0 10px rgba(0,0,0,0.2);z-index:501;transition:0.3s;padding:10px;overflow-y:auto}
#cartDrawer.open{right:0}
#cartOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.3);display:none;z-index:500}
#cartOverlay.show{display:block}
.cart-row{display:flex;justify-content:space-between;align-items:center;margin:5px 0;border-bottom:1px solid #ddd;padding-bottom:5px}
.cart-row .controls{display:flex;gap:5px;align-items:center}
.cart-row .controls button{padding:2px 5px;border:none;background:#ef4444;color:#fff;border-radius:5px;cursor:pointer}
#cartTotalBottom{font-weight:bold;margin-top:10px;text-align:center}
.delivery-options{display:flex;justify-content:center;gap:10px;margin-bottom:10px}
.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:10px 20px;border-radius:8px;display:none;z-index:600}
</style>
</head>
<body>

<header>
  <img src="logo-bg.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…">
</header>

<div class="sections" id="sections"></div>
<div class="cards" id="menuList"></div>

<button id="cartBtn">ğŸ›’<div id="cartCount">0</div></button>

<div id="cartOverlay"></div>
<div id="cartDrawer">
  <button id="closeCartBtn" style="float:left;background:#ef4444;color:#fff;border:none;padding:6px 10px;border-radius:6px;cursor:pointer">X</button>
  <h3>Ø§Ù„Ø³Ù„Ø©</h3>
  <div class="delivery-options">
    <label><input type="radio" name="deliveryType" value="delivery"> ØªÙˆØµÙŠÙ„ Ù¥ Ø±ÙŠØ§Ù„</label>
    <label><input type="radio" name="deliveryType" value="pickup"> Ø§Ø³ØªÙ„Ø§Ù…</label>
  </div>
  <div id="cartItems"></div>
  <div id="cartTotalBottom"></div>
  <button id="sendWhatsapp" style="width:100%;background:#25D366;color:#fff;padding:10px;border:none;border-radius:8px;margin-top:10px;cursor:pointer">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨</button>
  <button id="clearCart" style="width:100%;background:#ef4444;color:#fff;padding:10px;border:none;border-radius:8px;margin-top:5px;cursor:pointer">Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©</button>
</div>

<div id="toast" class="toast"></div>
<script>
/* ====== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ÙŠÙˆ Ø§Ù„ÙƒØ§Ù…Ù„ ====== */
const menuData=[
  {section:"Ø§Ù„Ø´ÙˆØ§ÙŠÙ‡",items:[
    {id:"sh1",img:"sh.jpg",name:"Ø­Ø¨Ø© Ø´ÙˆØ§ÙŠÙ‡",basePrice:46,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:4}
    ]},
    {id:"sh2",img:"sh.jpg",name:"Ù†Øµ Ø­Ø¨Ø© Ø´ÙˆØ§ÙŠÙ‡",basePrice:24,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:1}
    ]}
  ]},
  {section:"Ø§Ù„Ù…Ø¸Ø¨ÙŠ",items:[
    {id:"md1",img:"md.jpg",name:"Ø­Ø¨Ø© Ù…Ø¸Ø¨ÙŠ",basePrice:46,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:4}
    ]},
    {id:"md2",img:"md.jpg",name:"Ù†Øµ Ø­Ø¨Ø© Ù…Ø¸Ø¨ÙŠ",basePrice:24,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:1}
    ]}
  ]},
  {section:"Ø§Ù„Ù…Ù†Ø¯ÙŠ",items:[
    {id:"mn1",img:"mn.jpg",name:"Ø­Ø¨Ø© Ù…Ù†Ø¯ÙŠ",basePrice:46,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:4}
    ]},
    {id:"mn2",img:"mn.jpg",name:"Ù†Øµ Ø­Ø¨Ø© Ù…Ù†Ø¯ÙŠ",basePrice:24,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:1}
    ]}
  ]},
  {section:"Ù…Ø¯ÙÙˆÙ†",items:[
    {id:"mdf1",img:"mdf.jpg",name:"Ø­Ø¨Ø© Ù…Ø¯ÙÙˆÙ†",basePrice:46,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:4},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:4},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:4}
    ]},
    {id:"mdf2",img:"mdf.jpg",name:"Ù†Øµ Ø­Ø¨Ø© Ù…Ø¯ÙÙˆÙ†",basePrice:24,options:[
      {name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0},{name:"Ø±Ø² Ø¨Ø´Ø§ÙˆØ±",price:1},{name:"Ø±Ø² Ù…Ù†Ø¯ÙŠ",price:1},{name:"Ø±Ø² Ù…Ø«Ù„ÙˆØ«Ù‡",price:1}
    ]}
  ]},
  {section:"Ø§Ù„Ø¯Ø¬Ø§Ø¬",items:[
    {id:"dj1",img:"dj.jpg",name:"Ø­Ø¨Ø© Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙˆØ¨Ø©",basePrice:50,options:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0}]},
    {id:"dj2",img:"dj.jpg",name:"Ù†Øµ Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙˆØ¨Ø©",basePrice:25,options:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0}]},
    {id:"dj3",img:"dj.jpg",name:"Ø­Ø¨Ø© Ø¯Ø¬Ø§Ø¬ Ù…Ø¶ØºÙˆØ·",basePrice:50,options:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0}]},
    {id:"dj4",img:"dj.jpg",name:"Ù†Øµ Ø¯Ø¬Ø§Ø¬ Ù…Ø¶ØºÙˆØ·",basePrice:25,options:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0}]},
    {id:"dj5",img:"dj.jpg",name:"Ø­Ø¨Ø© Ø¯Ø¬Ø§Ø¬ Ø²Ø±Ø¨ÙŠØ§Ù†",basePrice:50,options:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0}]},
    {id:"dj6",img:"dj.jpg",name:"Ù†Øµ Ø¯Ø¬Ø§Ø¬ Ø²Ø±Ø¨ÙŠØ§Ù†",basePrice:25,options:[{name:"Ø±Ø² Ø´Ø¹Ø¨ÙŠ",price:0}]}
  ]}
  // Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: Ø§Ù„Ø­Ù…ØŒ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§ØªØŒ Ø§Ù„Ø£ÙŠØ¯Ø§Ù…Ø§ØªØŒ Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§ØªØŒ Ø§Ù„ÙƒÙ†Ø§ÙÙ‡ØŒ Ø§Ù„Ù…Ø´ÙˆÙŠØ§Øª Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·
];

/* ====== Ø§Ù„Ø³Ù„Ø© ÙˆÙˆØ¸Ø§Ø¦ÙÙ‡Ø§ ====== */
let cart = JSON.parse(localStorage.getItem("deerty_cart")||"[]");
const sectionsEl=document.getElementById("sections");
const menuList=document.getElementById("menuList");
const cartBtn=document.getElementById("cartBtn");
const cartCount=document.getElementById("cartCount");
const cartDrawer=document.getElementById("cartDrawer");
const cartOverlay=document.getElementById("cartOverlay");
const closeCartBtn=document.getElementById("closeCartBtn");
const cartItemsEl=document.getElementById("cartItems");
const cartTotalBottom=document.getElementById("cartTotalBottom");
const sendWhatsapp=document.getElementById("sendWhatsapp");
const clearCart=document.getElementById("clearCart");
const toast=document.getElementById("toast");

function renderSections(){
  sectionsEl.innerHTML="";
  menuData.forEach((sec,idx)=>{
    const btn=document.createElement("button");
    btn.className="sec-btn"; btn.innerText=sec.section;
    btn.onclick=()=>renderMenu(sec.section);
    sectionsEl.appendChild(btn);
    if(idx===0) btn.click();
  });
}

function renderMenu(sectionName){
  menuList.innerHTML="";
  const sec=menuData.find(s=>s.section===sectionName);
  if(!sec) return;
  sec.items.forEach(item=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <div style="display:flex;align-items:center">
        <img src="${item.img}" alt="${item.name}" onerror="this.style.opacity=.3">
        <div style="margin-right:10px">
          <h4>${item.name}</h4>
          <div>${item.basePrice} Ø±ÙŠØ§Ù„</div>
        </div>
      </div>
      <div>
        <button class="add-btn" onclick='openOptions(${JSON.stringify(item).replace(/'/g,"\\'")})'>Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
      </div>
    `;
    menuList.appendChild(card);
  });
}

function openOptions(item){
  const overlay=document.createElement("div");
  overlay.style.position="fixed"; overlay.style.inset=0;
  overlay.style.background="rgba(0,0,0,0.5)"; overlay.style.zIndex=500;
  overlay.onclick=()=>document.body.removeChild(overlay);

  const box=document.createElement("div");
  box.style.position="fixed"; box.style.top="50%"; box.style.left="50%";
  box.style.transform="translate(-50%,-50%)";
  box.style.background="#fff"; box.style.padding="20px"; box.style.borderRadius="10px";
  box.style.minWidth="250px"; box.onclick=e=>e.stopPropagation();

  let html=`<h4>${item.name}</h4>`;
  item.options.forEach((opt,idx)=>{
    html+=`<label style="display:block;margin:6px 0">
      <input type="radio" name="itemOption" value="${idx}" ${idx===0?"checked":""}> ${opt.name} ${opt.price>0?"+ "+opt.price+" Ø±ÙŠØ§Ù„":""}
    </label>`;
  });
  html+=`<button style="margin-top:10px;padding:6px 12px;background:#ef4444;color:#fff;border:none;border-radius:8px;cursor:pointer" onclick="confirmOption()">ØªØ£ÙƒÙŠØ¯</button>`;
  box.innerHTML=html; overlay.appendChild(box); document.body.appendChild(overlay);

  window.confirmOption=()=>{
    const selectedIdx=parseInt(document.querySelector('input[name="itemOption"]:checked').value);
    addToCart({...item, option:item.options[selectedIdx]});
    document.body.removeChild(overlay);
  };
}

function saveCart(){ localStorage.setItem("deerty_cart",JSON.stringify(cart)); renderCart(); }

function addToCart(item){
  const obj={id:item.id+"_"+item.option.name,name:item.name+" ("+item.option.name+")",price:item.basePrice+item.option.price,qty:1};
  const found=cart.find(i=>i.id===obj.id);
  if(found) found.qty++; else cart.push(obj);
  saveCart(); showToast("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©");
}

function renderCart(){
  cartItemsEl.innerHTML="";
  let total=0,count=0;
  cart.forEach((it,idx)=>{
    const row=document.createElement("div");
    row.className="cart-row";
    row.innerHTML=`
      <div>${it.name} <br> ${it.qty} Ã— ${it.price} Ø±ÙŠØ§Ù„</div>
      <div class="controls">
        <button onclick="updateQty(${idx},-1)">-</button>
        <div>${it.qty}</div>
        <button onclick="updateQty(${idx},1)">+</button>
        <button onclick="removeItem(${idx})">Ø­Ø°Ù</button>
      </div>
    `;
    cartItemsEl.appendChild(row);
    total+=it.price*it.qty; count+=it.qty;
  });
  const deliveryType=document.querySelector('input[name="deliveryType"]:checked')?.value;
  if(deliveryType==="delivery") total+=5;
  cartTotalBottom.innerText=total+" Ø±ÙŠØ§Ù„";
  cartCount.innerText=count; cartCount.style.display=count===0?"none":"inline-block";
}

function updateQty(idx,change){ if(!cart[idx]) return; cart[idx].qty+=change; if(cart[idx].qty<1) cart.splice(idx,1); saveCart(); }
function removeItem(idx){ cart.splice(idx,1); saveCart(); }

sendWhatsapp.addEventListener("click",()=>{
  if(cart.length===0){ showToast("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©"); return; }
  const deliveryType=document.querySelector('input[name="deliveryType"]:checked')?.value;
  const lines=["Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:"];
  cart.forEach(it=>lines.push(`${it.qty} Ã— ${it.name} â€” ${it.price*it.qty} Ø±ÙŠØ§Ù„`));
  if(deliveryType==="delivery") lines.push("Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„: 5 Ø±ÙŠØ§Ù„");
  const total=cart.reduce((s,i)=>s+i.price*i.qty,0)+(deliveryType==="delivery"?5:0);
  lines.push(`Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±ÙŠØ§Ù„`);
  window.open(`https://wa.me/966536803598?text=${encodeURIComponent(lines.join("\n"))}`,"_blank");
});

clearCart.addEventListener("click",()=>{ cart=[]; saveCart(); showToast("ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©"); });
cartBtn.addEventListener("click",()=>{ cartDrawer.classList.add("open"); cartOverlay.classList.add("show"); });
cartOverlay.addEventListener("click",()=>{ cartDrawer.classList.remove("open"); cartOverlay.classList.remove("show"); });
closeCartBtn.addEventListener("click",()=>{ cartDrawer.classList.remove("open"); cartOverlay.classList.remove("show"); });

function showToast(msg,time=2000){ toast.innerText=msg; toast.style.display="block"; setTimeout(()=>toast.style.display="none",time); }

/* ====== Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ====== */
renderSections();
renderCart();
</script>
</body>
</html>
